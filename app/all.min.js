var FlickrFeed=function(){function e(e){this.$el=e,this.interval=e.data("interval")||2e3,this.searchTerm=e.data("searchTerm")||"kittens",this.init()}return e.prototype.init=function(){this.setupDom(),this.startSlideShow()},e.prototype.setupDom=function(){this.$title=$('<h3 class="flickr-feed-search-term"></h3>').appendTo(this.$el),this.$container=$('<div class="flickr-feed-images"></div>').appendTo(this.$el),this.$image=$('<img class="flickr-feed-image"/>').appendTo(this.$container),this.$title.text(this.searchTerm)},e.prototype.startSlideShow=function(){var e=this;this.images=[],this.imageIndex=-1,this.$image.load(function(){return e.onImageLoaded()}),this.getImages()},e.prototype.onImageLoaded=function(){var e=this;setTimeout(function(){return e.showNextImage()},this.interval)},e.prototype.getImages=function(){var e=this;$.getJSON("https://api.flickr.com/services/feeds/photos_public.gne?jsoncallback=?",{tags:this.searchTerm,tagmode:"any",format:"json"}).done(function(t){return e.onFeedLoaded(t)})},e.prototype.onFeedLoaded=function(e){this.images=e.items,this.imageIndex=-1,this.showNextImage()},e.prototype.showNextImage=function(){return this.imageIndex++,this.imageIndex>=this.images.length?void this.getImages():(console.log("show image "+(this.imageIndex+1)+" of "+this.images.length+" for "+this.searchTerm),void this.$image.attr("src",this.images[this.imageIndex].media.m))},e}();$(function(){$(".flickr-feed").each(function(){new FlickrFeed($(this))})});